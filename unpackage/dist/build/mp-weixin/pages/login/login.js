(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{5898:function(e,n,t){},"63e6":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return a}));var a={uniNavBar:function(){return t.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(t.bind(null,"74e5"))}},r=function(){var e=this,n=e.$createElement;e._self._c},i=[]},"652d":function(e,n,t){"use strict";t.r(n);var a=t("63e6"),r=t("74f6");for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);t("996b");var o,u=t("f0c5"),s=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,"adbf68fc",null,!1,a["a"],o);n["default"]=s.exports},"6b1f":function(e,n,t){"use strict";(function(e){t("90ab");a(t("66fd"));var n=a(t("652d"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},"74f6":function(e,n,t){"use strict";t.r(n);var a=t("d482"),r=t.n(a);for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);n["default"]=r.a},"996b":function(e,n,t){"use strict";var a=t("5898"),r=t.n(a);r.a},d482:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(t("a34a")),r=t("3eee");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n,t,a,r,i,o){try{var u=e[i](o),s=u.value}catch(c){return void t(c)}u.done?n(s):Promise.resolve(s).then(a,r)}function u(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var i=e.apply(n,t);function u(e){o(i,a,r,u,s,"next",e)}function s(e){o(i,a,r,u,s,"throw",e)}u(void 0)}))}}var s={name:"login",data:function(){return{isLogin:!0,nicknameTip:"",usernameTip:"",passwordTip:"",showpwd:!1}},methods:{formSubmit:function(n){var t=this;return u(a.default.mark((function i(){var o,u,s,c,f,d,l,p,h;return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=n.detail.value,u=o.nickname,s=o.username,c=o.password,f=o.agree,0!==f.length){a.next=3;break}return a.abrupt("return",e.showToast({title:"未同意用户协议",icon:"error"}));case 3:if(!t.isLogin){a.next=19;break}if(s){a.next=8;break}t.usernameTip="用户名为空",a.next=17;break;case 8:if(c){a.next=12;break}t.passwordTip="密码为空",a.next=17;break;case 12:return e.showLoading({title:"注册中..."}),a.next=15,(0,r.request)({url:"/login",method:"POST",data:{username:s,password:c}});case 15:d=a.sent,200===d.statusCode?(e.hideLoading(),e.showToast({title:"登录成功"}),e.setStorageSync("userInfo",d.data),t.$store.dispatch("login",d.data),t.back()):e.showToast({title:"用户名或密码错误",icon:"error"});case 17:a.next=44;break;case 19:if(t.usernameTip="",t.passwordTip="",t.nicknameTip="",l=/^[a-zA-Z0-9]{4,16}$/,p=/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$).{4,16}$/,!(u.length<=0||u.length>10)){a.next=28;break}t.nicknameTip="昵称长度1-10",a.next=44;break;case 28:if(l.test(s)){a.next=32;break}t.usernameTip="账号长度4-16，数字或字母组成",a.next=44;break;case 32:if(p.test(c)){a.next=36;break}t.passwordTip="密码长度4-16，数字、英文、字符中的两种以上组成",a.next=44;break;case 36:return e.showLoading({title:"注册中..."}),a.next=39,(0,r.request)({url:"/user",method:"POST",data:{nickname:u,username:s,password:c}});case 39:if(h=a.sent,200==h.statusCode){a.next=42;break}return a.abrupt("return",e.showToast({title:h.data,icon:"error"}));case 42:e.hideLoading(),e.showToast({title:"注册成功！"});case 44:case"end":return a.stop()}}),i)})))()},showPwd:function(){this.showpwd=!this.showpwd},back:function(){e.navigateBack()},readAgreement:function(){e.navigateTo({url:"/pages/login/agreement"})},gozhuce:function(){this.isLogin=!this.isLogin},wangjimima:function(){e.showModal({content:"忘记密码找作者，作者QQ：2389342251",showCancel:!1,confirmColor:"#000"})}}};n.default=s}).call(this,t("543d")["default"])}},[["6b1f","common/runtime","common/vendor"]]]);